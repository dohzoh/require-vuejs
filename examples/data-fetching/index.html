<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>Require Vue</title>
</head>

<body>
    <link rel="stylesheet" href="/global.css">
    <a href="/">&larr; Examples index</a>
    <div id="app"></div>
</body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-polyfill/6.26.0/polyfill.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/6.0.20/browser.min.js"></script>

<script src="https://unpkg.com/systemjs/dist/system.js"></script>
<script>
    "use strict";
    window.define = SystemJS.amdDefine;
    window.require = window.requirejs = SystemJS.amdRequire;

    System.config({
        map: {
            Vue: "https://unpkg.com/vue",
            VueRouter: "https://unpkg.com/vue-router/dist/vue-router.js",
            vue: "/src/plugin-vue-inbrowser.min.js",
            'plugin-babel': 'https://unpkg.com/systemjs-plugin-babel/plugin-babel.js',
            'systemjs-babel-build': 'https://unpkg.com/systemjs-plugin-babel/systemjs-babel-browser.js',
        },
        meta: {
            "*.vue": { loader: "vue" }
        },
        transpiler: 'plugin-babel',
    });

    Promise.all([
        System.import('Vue'),
        System.import('VueRouter'),
    ]).then(function(comp) {
        let Vue = comp[0];
        let VueRouter = comp[1];
        
        Vue.use(VueRouter)
        const Home = { template: '<div>home</div>' }

        const router = new VueRouter({
            mode: 'hash',
            routes: [
                { path: '/', component: Home },
                { name: "post", path: '/post/:id', component: function(){return System.import('./Post.vue')} }
            ]
        });

        new Vue({
            el: "#app",
            router: router,
            template: '<div><h1>Data Fetching</h1><ul><li><router-link to="/">/</router-link></li><li><router-link :to="{ name:\'post\', params: { id: 1 }}">/post/1</router-link></li><li><router-link to="/post/2">/post/2</router-link></li><li><router-link to="/post/3">/post/3</router-link></li></ul><router-view class="view"></router-view></div>',
        });
    });
</script>

</html>